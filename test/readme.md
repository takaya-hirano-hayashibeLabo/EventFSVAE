# Test Documentation

## test_input_output.py
### 概要
EventFSVAEの入出力関係のみを確認するプログラム.  
同心円上の入力スパイクを入れて, 出力スパイクが出てくるか確認するだけ. 

### 入力次元
|                FSVAE                 |             FSVAE_large              |
| :----------------------------------: | :----------------------------------: |
| [batch_size x channel x 32 x 32 x T] | [batch_size x channel x 64 x 64 x T] |

## test_train.py
### 概要
`test_input_output.py`で入力したスパイクデータを学習して復元できるか確認するプログラム.  
このプログラムで学習できるのは, 入出力が0or1のみ.  
さらに, eventの[0, 1, -1]を学習させたければ, もう少しネットワークを改良する必要がある.  

## test_double_exp_filter.py
### 概要
FSVAEの出力を0,1,-1にしたら上手く学習できなかった  
原因は損失関数の二重指数関数にあるのでは？と思って,  
二重指数関数に-1を入れたときの挙動を調べてみる.  

### 調査結果
２重指数関数の`dt,td,tr`の値によって大きくグラフの形が変わる.  
それぞれの値が大きすぎると, 出力がほぼ0になってしまう.  
教科書に載ってたデフォルトの値が良さげな感じがする.  

#### デフォルト値
|  dt   |  td   |  tr   |
| :---: | :---: | :---: |
| 1e-4  | 1e-2  | 5e-3  |
  
#### 上手く行った手動バージョン
|  dt   |  td   |  tr   |
| :---: | :---: | :---: |
| 4e-3  | 1e-2  | 5e-3  |
`dt`を大きくすると, spike入力の影響を受けやすくなる.  
この手動バージョンでやったら, 0,1,-1が割と上手く学習できた.

#### 上手く行かないバージョン
|  dt   |  td   |  tr   |
| :---: | :---: | :---: |
| 0.05  |  20   |   2   |
これだと全くうまく行かない  
(卒論これでやってたんだが...)  

## test_train_evet.py
### 概要
出力を0, 1, -1にした.
損失関数を`test_double_exp_filter.py`をもとにいい感じに設定したら,  
割と上手く学習できるようになった.
